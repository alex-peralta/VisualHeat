<head>
  <!-- Plotly.js -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<body>
  
  <div id="chart_div"><!-- Plotly chart will be drawn inside this DIV --></div>
  <script>

  	var trace;
  	var layout = {
	  title: 'Anual Average Temperature',
	  xaxis: {
	    title: 'Year'
	  },
	  yaxis: {
	    title: 'Average Temperature'
	  }
	};

	// change static reference to api call
    $.getJSON("/api/" + country_code ,addData);

  	function addData(data){
  		var arr = data.heat;
  		var x = [];
  		var y = [];
  		for(var i = 0; i < arr.length; i++){
  			x.push(arr[i].YEAR);
  			y.push(arr[i].DATA);
  		}
  		trace = {
  			"x": x,
			"y": y,
			type: 'scatter',
			mode: 'lines+markers',
			name: 'Anual Average Temperature'
  		}
  		var data = [trace];
  		Plotly.newPlot('chart_div', data, layout);
  	}
	
  </script>
</body>